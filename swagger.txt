swagger: '2.0'
info:
  title: Kubernetes_Controller
  version: "0.1"
consumes:
  - application/json
produces:
  - application/json
paths:
  /:
    get:
      operationId: application.hello_world
      summary: "Hello World!"
      tags: [Kub_Controller]
      responses:
        200:
          description: OK
  /app:
    get:
        operationId: application.get_all_apps
        tags: [Kub_Controller]
        summary: "Gets information about all applications"
        consumes:
        - "application/json"
        produces:
        - "application/json"
        responses:
          200:
            description: "OK."
          400:
            description: "Bad request."
          404:
            description: "Not found."
          500:
            description: "Internal server error."
  /app/{appID}:
    get:
        operationId: application.get_app
        tags: [Kub_Controller]
        summary: "Gets information about a specific application"
        consumes:
        - "application/json"
        produces:
        - "application/json"
        parameters:
        - name: "appID"
          in: "path"
          description: "ID of the application to get information"
          required: true
          type: "integer"
          format: "int64"
        responses:
          200:
            description: "OK."
          400:
            description: "Bad request."
          404:
            description: "Not found."
          500:
            description: "Internal server error."
    post:
      operationId: application.stop_app
      tags: [Kub_Controller]
      summary: "Stop an application"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - name: "appID"
        in: "path"
        description: "ID of the application to stop"
        required: true
        type: "integer"
        format: "int64"
      responses:
        200:
          description: "OK."
        400:
          description: "Bad request."
        404:
          description: "Not found."
        500:
          description: "Internal server error."
    delete:
        operationId: application.delete_app
        tags: [Kub_Controller]
        summary: "Removes an application from the platform"
        consumes:
        - "application/json"
        produces:
        - "application/json"
        parameters:
        - name: "appID"
          in: "path"
          description: "ID of the application to remove"
          required: true
          type: "integer"
          format: "int64"
        responses:
          200:
            description: "OK."
          400:
            description: "Bad request."
          404:
            description: "Not found."
          500:
            description: "Internal server error."
  /app/deploy:
    post:
      operationId: application.deploy_app
      tags: [Kub_Controller]
      summary: "Deploy App"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Application object to be deployed"
        required: true
        schema:
          $ref: '#/definitions/Kub'
      responses:
        201:
          description: "Created."
        400:
          description: "Bad request."
        500:
          description: "Internal server error"
  /app/tracing/{appID}:
    get:
        operationId: application.get_app_tracing
        tags: [Kub_Controller]
        summary: "Gets information about all applications"
        consumes:
        - "application/json"
        produces:
        - "application/json"
        parameters:
        - name: "appID"
          in: "path"
          description: "ID of the application"
          required: true
          type: "integer"
          format: "int64"
        responses:
          200:
            description: "OK."
          400:
            description: "Bad request."
          404:
            description: "Not found."
          500:
            description: "Internal server error."

definitions:
  Kub:
    type: "object"
    required:
    - "name"
    - "docker_image"
    - "quality_metric"
    properties:
      name:
        type: "string"
        example: "Songs Application"
        description: "Name of the deployed application"
      docker_image:
        type: "string"
        example: "fcribeiro/Songs_MS"
        description: "Name of the docker image"
      quality_metric:
        type: "array"
        xml:
          name: "metrics"
          wrapped: true
        items:
          type: "string"
